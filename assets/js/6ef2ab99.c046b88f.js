"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4211],{7729:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"bitcoin/etl/s1-sync-bitcoin","title":"Sync a Bitcoin Node","description":"Step 1. Install Bitcoin Core and sync the node","source":"@site/docs/bitcoin/etl/s1-sync-bitcoin.mdx","sourceDirName":"bitcoin/etl","slug":"/bitcoin/etl/node-sync","permalink":"/docs/bitcoin/etl/node-sync","draft":false,"unlisted":false,"editUrl":"https://github.com/B1AAB/EBA/edit/main/website/docs/bitcoin/etl/s1-sync-bitcoin.mdx","tags":[],"version":"current","sidebarPosition":0,"frontMatter":{"title":"Sync a Bitcoin Node","description":"Step 1. Install Bitcoin Core and sync the node","sidebar_position":0,"slug":"/bitcoin/etl/node-sync"},"sidebar":"tutorialSidebar","previous":{"title":"Overview","permalink":"/docs/bitcoin/etl/overview"},"next":{"title":"Extract Block Data","permalink":"/docs/bitcoin/etl/traverse"}}');var o=i(4848),s=i(8453);const r={title:"Sync a Bitcoin Node",description:"Step 1. Install Bitcoin Core and sync the node",sidebar_position:0,slug:"/bitcoin/etl/node-sync"},c="Sync a Bitcoin Node",d={},a=[{value:"Privacy Best Practices",id:"privacy-best-practices",level:3}];function l(e){const n={a:"a",code:"code",em:"em",h1:"h1",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"sync-a-bitcoin-node",children:"Sync a Bitcoin Node"})}),"\n",(0,o.jsxs)(n.p,{children:["We use ",(0,o.jsx)(n.a,{href:"https://bitcoin.org/en/bitcoin-core/",children:"Bitcoin Core"}),"\nto interact with the Bitcoin Mainnet and\nretrieve the necessary on-chain data.\nThis requires running a ",(0,o.jsx)(n.a,{href:"https://bitcoin.org/en/full-node",children:"full Bitcoin node"}),",\ni.e., a node that is fully synchronized with the network."]}),"\n",(0,o.jsxs)(n.p,{children:["The initial synchronization downloads the entire blockchain history.\nDepending on your hardware (CPU performance, disk read/write speed) and network connection,\nthis process can take a significant amount of time, potentially a week.\nThen, we need to index the transactions, which takes an additional day or two to complete.\nAs of block height ",(0,o.jsx)(n.code,{children:"875,000"}),", syncing a full node requires approximately ",(0,o.jsx)(n.code,{children:"850"})," GB of storage space."]}),"\n",(0,o.jsxs)(n.p,{children:["Bitcoin Core offers a ",(0,o.jsx)(n.em,{children:"prune"})," option, which reduces disk space usage by discarding older block data.\nHowever, since we need a full transaction index (",(0,o.jsx)(n.code,{children:"txindex=1"})," setting in Bitcoin Core),\nand given that indexing is incompatible with pruning,\ntherefore, we ",(0,o.jsx)(n.strong,{children:"must run a non-pruned node"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"You may take the following steps."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Download and install ",(0,o.jsx)(n.a,{href:"https://bitcoin.org/en/download",children:"Bitcoin Core"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Start ",(0,o.jsx)(n.code,{children:"bitcoin-qt"})," using the following command."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"cd [installation directory]\n.\\bitcoin-qt.exe -server=1 -rest=1 -txindex=1 -rpcworkqueue=100\n"})}),"\n",(0,o.jsxs)(n.p,{children:["It will take ~6 days for this process to complete.\nWhile you could monitor the progress of synchronizing with the network,\nthe UI does not report on the indexing progress.\nHence, after synchronization is complete, the indexing is in progress,\nand ",(0,o.jsx)(n.code,{children:"bitcoin-qt"}),' will not respond (properly) to API calls before this process finishes.\nYou may "monitor" the indexing progress by monitoring the ',(0,o.jsx)(n.code,{children:"\\indexes\\txindex"})," directory for changed/added files."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsxs)(n.strong,{children:["Why setting ",(0,o.jsx)(n.code,{children:"-rpcworkqueue=100"}),"?"]}),"\nEBA is optimized for concurrency and sends many API requests to ",(0,o.jsx)(n.code,{children:"bitcoin-qt"}),",\nwith a dynamically adjusted degree of parallelization.\nHowever, Bitcoin Core's default worker queue size is small and you get a ",(0,o.jsx)(n.code,{children:"503"})," error when EBA creates many concurrent requests\n(e.g., see ",(0,o.jsx)(n.a,{href:"https://github.com/bitcoin/bitcoin/blob/767ee2e3a1082468b4e2248bac3ef8bd54bb2ddb/src/httpserver.cpp#L269",children:"this error"}),");\nhence, we increase the RPC queue size."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Test if the client is correctly set up and responding using the following ",(0,o.jsx)(n.code,{children:"GET"})," request:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"GET localhost:8332/rest/chaininfo.json\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"[Optional]"})," Please see ",(0,o.jsx)(n.a,{href:"/docs/contribute/cookbook#bitcoin-core-lan",children:"this page"}),"\nfor running Bitcoin Core in a local network."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"privacy-best-practices",children:"Privacy Best Practices"}),"\n",(0,o.jsxs)(n.p,{children:["Do ",(0,o.jsx)(n.strong,{children:"NOT"})," define your real Wallet on this ",(0,o.jsx)(n.code,{children:"bitcoin-qt"})," instance\n(i.e., the Wallet you may have used on any Bitcoin exchange service for Bitcoin trading).\nEBA does ",(0,o.jsx)(n.strong,{children:"NOT"})," try to access Wallets defined in ",(0,o.jsx)(n.code,{children:"bitcoin-qt"}),".\nRegardless, there are some known privacy concerns when running ",(0,o.jsx)(n.code,{children:"bitcoin-qt"}),"\nwith a defined wallet while the REST API is enabled.\nSee ",(0,o.jsx)(n.a,{href:"https://github.com/bitcoin/bitcoin/blob/master/doc/REST-interface.md#risks",children:"Bitcoin docs"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>c});var t=i(6540);const o={},s=t.createContext(o);function r(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);