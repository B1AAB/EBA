"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2122],{1470:(e,n,t)=>{t.d(n,{A:()=>k});var r=t(6540),s=t(4164),i=t(7559),a=t(3104),o=t(6347),l=t(205),c=t(7485),u=t(1682),d=t(679);function h(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return h(e).map((({props:{value:e,label:n,attributes:t,default:r}})=>({value:e,label:n,attributes:t,default:r})))}(t);return function(e){const n=(0,u.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function m({value:e,tabValues:n}){return n.some((n=>n.value===e))}function f({queryString:e=!1,groupId:n}){const t=(0,o.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(s),(0,r.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(t.location.search);n.set(s,e),t.replace({...t.location,search:n.toString()})}),[s,t])]}function x(e){const{defaultValue:n,queryString:t=!1,groupId:s}=e,i=p(e),[a,o]=(0,r.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:i}))),[c,u]=f({queryString:t,groupId:s}),[h,x]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,s]=(0,d.Dv)(n);return[t,(0,r.useCallback)((e=>{n&&s.set(e)}),[n,s])]}({groupId:s}),v=(()=>{const e=c??h;return m({value:e,tabValues:i})?e:null})();(0,l.A)((()=>{v&&o(v)}),[v]);return{selectedValue:a,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),x(e)}),[u,x,i]),tabValues:i}}var v=t(2303);const j={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=t(4848);function g({className:e,block:n,selectedValue:t,selectValue:r,tabValues:i}){const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,a.a_)(),c=e=>{const n=e.currentTarget,s=o.indexOf(n),a=i[s].value;a!==t&&(l(n),r(a))},u=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:i.map((({value:e,label:n,attributes:r})=>(0,b.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{o.push(e)},onKeyDown:u,onClick:c,...r,className:(0,s.A)("tabs__item",j.tabItem,r?.className,{"tabs__item--active":t===e}),children:n??e},e)))})}function w({lazy:e,children:n,selectedValue:t}){const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=i.find((e=>e.props.value===t));return e?(0,r.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function y(e){const n=x(e);return(0,b.jsxs)("div",{className:(0,s.A)(i.G.tabs.container,"tabs-container",j.tabList),children:[(0,b.jsx)(g,{...n,...e}),(0,b.jsx)(w,{...n,...e})]})}function k(e){const n=(0,v.A)();return(0,b.jsx)(y,{...e,children:h(e.children)},String(n))}},3768:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"bitcoin/etl/overview","title":"ETL Pipeline","description":"You only need to run the ETL pipeline if you would like to","source":"@site/docs/bitcoin/etl/overview.mdx","sourceDirName":"bitcoin/etl","slug":"/bitcoin/etl/overview","permalink":"/docs/bitcoin/etl/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/B1AAB/EBA/edit/main/website/docs/bitcoin/etl/overview.mdx","tags":[],"version":"current","frontMatter":{"id":"overview","title":"ETL Pipeline","sidebar_label":"Overview"},"sidebar":"tutorialSidebar","previous":{"title":"Overview","permalink":"/docs/bitcoin/overview"},"next":{"title":"Sync a Bitcoin Node","permalink":"/docs/bitcoin/etl/node-sync"}}');var s=t(4848),i=t(8453),a=(t(4795),t(1470)),o=t(9365);const l={id:"overview",title:"ETL Pipeline",sidebar_label:"Overview"},c=void 0,u={},d=[];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",hr:"hr",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.admonition,{title:"When do I need to run the ETL pipeline?",type:"tip",children:[(0,s.jsx)(n.p,{children:"You only need to run the ETL pipeline if you would like to\nreproduce results,\ncollect information beyond the resources we have shared\n(such as data from blocks created after our cutoff point),\nor host your own solution."}),(0,s.jsxs)(n.p,{children:["You do ",(0,s.jsx)(n.strong,{children:"not"})," need to run the ETL pipeline if you only intend to\n",(0,s.jsx)(n.a,{href:"/docs/bitcoin/sampling/overview",children:"sample new graphs"})," or\n",(0,s.jsx)(n.a,{href:"https://github.com/B1AAB/GraphStudio",children:"develop models"})," on\nthe ",(0,s.jsx)(n.a,{href:"https://www.kaggle.com/datasets/vjalili/bitcoin-graph-sampled-communities",children:"sampled communities we provide"}),"."]})]}),"\n",(0,s.jsx)(n.p,{children:"This section details the Extract, Transform, and Load (ETL) pipeline for\ncollecting Bitcoin data,\nformatting it as a graph, and\nimporting it into a Neo4j graph database."}),"\n",(0,s.jsxs)(n.p,{children:["You can run the pipeline on the entire Bitcoin history or\non a subset of blocks.\nSince running the pipeline end-to-end is highly resource-intensive,\nwe made two key ",(0,s.jsx)(n.a,{href:"/docs/gs/accessibility",children:"design decisions"}),":\nfirst, we developed it from the ground up to\nrun on a single machine,\nrelying on on-disk processing for resource-heavy operations.\nSecond, given its weeks-long runtime on the entire Bitcoin history,\nthe pipeline is divided into distinct steps,\nand we provide ",(0,s.jsx)(n.em,{children:"checkpoint"})," data for each one,\nallowing you to start the process at any point depending on your application's needs."]}),"\n",(0,s.jsx)(n.p,{children:"Please use the following guide to select the right entry point into the pipeline\nbased on your specific goals and available resources."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.a,{href:"./node-sync",children:[(0,s.jsx)(n.strong,{children:"Step 1"}),": Sync a Bitcoin Node"]})}),"\n",(0,s.jsxs)(a.A,{groupId:"operating-systems",defaultValue:"when",values:[{label:"When to Run",value:"when"},{label:"System Requirements",value:"resources"},{label:"Checkpoint",value:"checkpoint"}],children:[(0,s.jsx)(o.A,{value:"when",children:(0,s.jsx)(n.p,{children:"If you need to reproduce the entire pipeline,\ninclude historical data not in our current graph,\nor add data from the new blocks created after our cutoff date."})}),(0,s.jsx)(o.A,{value:"checkpoint",children:(0,s.jsxs)(n.p,{children:["This step performs the ",(0,s.jsx)(n.a,{href:"https://bitcoin.org/en/full-node#initial-block-downloadibd",children:"Initial Block Download (IBD)"}),",\na process where the Bitcoin Core client downloads\nthe blockchain history directly from the Bitcoin network.\nWe cannot provide checkpoint data for this step.\nUpon completion, you will have a fully synchronized and indexed Bitcoin Core node."]})}),(0,s.jsx)(o.A,{value:"resources",children:(0,s.jsx)(n.p,{children:"~1 week runtime, ~900GB storage, ~800GB Internet traffic."})})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.a,{href:"./traverse",children:[(0,s.jsx)(n.strong,{children:"Step 2"}),": Extract Block Data"]})}),"\n",(0,s.jsxs)(a.A,{groupId:"operating-systems",defaultValue:"when",values:[{label:"When to Run",value:"when"},{label:"System Requirements",value:"resources"},{label:"Checkpoint",value:"checkpoint"}],children:[(0,s.jsx)(o.A,{value:"when",children:(0,s.jsx)(n.p,{children:"After completing Step 1,\nto generate the Bitcoin graph in TSV files,\nblock-level summary statistics,\nTXO lifecycle,\nor Bitcoin address statistics."})}),(0,s.jsx)(o.A,{value:"checkpoint",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Noe4j format files on:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["AWS: ",(0,s.jsx)(n.code,{children:"s3://bitcoin-graph/v1/data_to_import_neo4j/"})]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://drive.google.com/drive/folders/11X6QiVvWSOzxvDIAD0OWu3g2Sa0as3UQ?usp=sharing",children:"Google Drive"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.kaggle.com/datasets/aab/bitcoin-block-metadata",children:"Block summary statistics"})}),"\n"]}),"\n"]})}),(0,s.jsx)(o.A,{value:"resources",children:(0,s.jsx)(n.p,{children:"2-3 days runtime, ~1.5TB storage."})})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.a,{href:"./address-stats",children:[(0,s.jsx)(n.strong,{children:"Step 3"}),": Address Statistics"]})}),"\n",(0,s.jsxs)(a.A,{groupId:"operating-systems",defaultValue:"when",values:[{label:"When to Run",value:"when"},{label:"System Requirements",value:"resources"},{label:"Checkpoint",value:"checkpoint"}],children:[(0,s.jsx)(o.A,{value:"when",children:(0,s.jsx)(n.p,{children:"You may run this optional step if\nyou need detailed summary statistics about script addresses.\nThis step runs on the raw address statistics generated in step 2."})}),(0,s.jsx)(o.A,{value:"checkpoint",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.kaggle.com/datasets/aab/bitcoin-block-metadata",children:"Block summary statistics"})}),"\n"]})}),(0,s.jsx)(o.A,{value:"resources",children:(0,s.jsx)(n.p,{children:"~1 day runtime, ~300GB storage."})})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.a,{href:"./txo-lifecycle",children:[(0,s.jsx)(n.strong,{children:"Step 4"}),": TXO Lifecycle"]})}),"\n",(0,s.jsxs)(a.A,{groupId:"operating-systems",defaultValue:"when",values:[{label:"When to Run",value:"when"},{label:"System Requirements",value:"resources"},{label:"Checkpoint",value:"checkpoint"}],children:[(0,s.jsx)(o.A,{value:"when",children:(0,s.jsx)(n.p,{children:"You may run this optional step if\nyou need summary statistics on transaction output (TXO) lifecycles, such as coin dormancy.\nThis step runs on the raw TXO lifecycle data generated in step 2."})}),(0,s.jsx)(o.A,{value:"checkpoint",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.kaggle.com/datasets/aab/bitcoin-block-metadata",children:"Block summary statistics"})}),"\n"]})}),(0,s.jsx)(o.A,{value:"resources",children:(0,s.jsx)(n.p,{children:"~1 day runtime, ~300GB storage."})})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.a,{href:"./import",children:[(0,s.jsx)(n.strong,{children:"Step 5"}),": Import Data into Neo4j"]})}),"\n",(0,s.jsxs)(a.A,{groupId:"operating-systems",defaultValue:"when",values:[{label:"When to Run",value:"when"},{label:"System Requirements",value:"resources"},{label:"Checkpoint",value:"checkpoint"}],children:[(0,s.jsx)(o.A,{value:"when",children:(0,s.jsx)(n.p,{children:"This step imports the formatted TSV files from Step 5 into a Neo4j database to enable efficient graph exploration and custom graph sampling."})}),(0,s.jsx)(o.A,{value:"checkpoint",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Neo4j database dump on:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["AWS: ",(0,s.jsx)(n.code,{children:"s3://bitcoin-graph/v1/neo4j_db_dump/"})]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://drive.google.com/drive/folders/1bAsjgVaIQrG2TDGkMtIEDPX8xKoiHJUf?usp=sharing",children:"Google Drive"})}),"\n"]}),"\n"]}),"\n"]})}),(0,s.jsx)(o.A,{value:"resources",children:(0,s.jsx)(n.p,{children:"~2-3 weeks runtime, ~6TB storage."})})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},4795:(e,n,t)=>{t.d(n,{A:()=>g});t(6540);var r=t(4164),s=t(6972),i=t(8774),a=t(5846),o=t(6654),l=t(1312),c=t(1107);const u={cardContainer:"cardContainer_fWXF",cardTitle:"cardTitle_rnsV",cardDescription:"cardDescription_PWke"};var d=t(4848);function h({className:e,href:n,children:t}){return(0,d.jsx)(i.A,{href:n,className:(0,r.A)("card padding--lg",u.cardContainer,e),children:t})}function p({className:e,href:n,icon:t,title:s,description:i}){return(0,d.jsxs)(h,{href:n,className:e,children:[(0,d.jsxs)(c.A,{as:"h2",className:(0,r.A)("text--truncate",u.cardTitle),title:s,children:[t," ",s]}),i&&(0,d.jsx)("p",{className:(0,r.A)("text--truncate",u.cardDescription),title:i,children:i})]})}function m({item:e}){const n=(0,s.Nr)(e),t=function(){const{selectMessage:e}=(0,a.W)();return n=>e(n,(0,l.T)({message:"1 item|{count} items",id:"theme.docs.DocCard.categoryDescription.plurals",description:"The default description for a category card in the generated index about how many items this category includes"},{count:n}))}();return n?(0,d.jsx)(p,{className:e.className,href:n,icon:"\ud83d\uddc3\ufe0f",title:e.label,description:e.description??t(e.items.length)}):null}function f({item:e}){const n=(0,o.A)(e.href)?"\ud83d\udcc4\ufe0f":"\ud83d\udd17",t=(0,s.cC)(e.docId??void 0);return(0,d.jsx)(p,{className:e.className,href:e.href,icon:n,title:e.label,description:e.description??t?.description})}function x({item:e}){switch(e.type){case"link":return(0,d.jsx)(f,{item:e});case"category":return(0,d.jsx)(m,{item:e});default:throw new Error(`unknown item type ${JSON.stringify(e)}`)}}const v={docCardListItem:"docCardListItem_W1sv"};function j({className:e}){const n=(0,s.a4)();return(0,d.jsx)(g,{items:n,className:e})}function b({item:e}){return(0,d.jsx)("article",{className:(0,r.A)(v.docCardListItem,"col col--6"),children:(0,d.jsx)(x,{item:e})})}function g(e){const{items:n,className:t}=e;if(!n)return(0,d.jsx)(j,{...e});const i=(0,s.d1)(n);return(0,d.jsx)("section",{className:(0,r.A)("row",t),children:i.map(((e,n)=>(0,d.jsx)(b,{item:e},n)))})}},5846:(e,n,t)=>{t.d(n,{W:()=>c});var r=t(6540),s=t(4586);const i=["zero","one","two","few","many","other"];function a(e){return i.filter((n=>e.includes(n)))}const o={locale:"en",pluralForms:a(["one","other"]),select:e=>1===e?"one":"other"};function l(){const{i18n:{currentLocale:e}}=(0,s.A)();return(0,r.useMemo)((()=>{try{return function(e){const n=new Intl.PluralRules(e);return{locale:e,pluralForms:a(n.resolvedOptions().pluralCategories),select:e=>n.select(e)}}(e)}catch(n){return console.error(`Failed to use Intl.PluralRules for locale "${e}".\nDocusaurus will fallback to the default (English) implementation.\nError: ${n.message}\n`),o}}),[e])}function c(){const e=l();return{selectMessage:(n,t)=>function(e,n,t){const r=e.split("|");if(1===r.length)return r[0];r.length>t.pluralForms.length&&console.error(`For locale=${t.locale}, a maximum of ${t.pluralForms.length} plural forms are expected (${t.pluralForms.join(",")}), but the message contains ${r.length}: ${e}`);const s=t.select(n),i=t.pluralForms.indexOf(s);return r[Math.min(i,r.length-1)]}(t,n,e)}}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var r=t(6540);const s={},i=r.createContext(s);function a(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:n},e.children)}},9365:(e,n,t)=>{t.d(n,{A:()=>a});t(6540);var r=t(4164);const s={tabItem:"tabItem_Ymn6"};var i=t(4848);function a({children:e,hidden:n,className:t}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.A)(s.tabItem,t),hidden:n,children:e})}}}]);