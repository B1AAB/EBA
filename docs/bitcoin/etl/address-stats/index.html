<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-bitcoin/etl/s3-address-stats" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Address Statistics | EBA</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://eba.b1aab.ai/docs/bitcoin/etl/address-stats"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Address Statistics | EBA"><meta data-rh="true" name="description" content="Step 3. Update stats"><meta data-rh="true" property="og:description" content="Step 3. Update stats"><link data-rh="true" rel="canonical" href="https://eba.b1aab.ai/docs/bitcoin/etl/address-stats"><link data-rh="true" rel="alternate" href="https://eba.b1aab.ai/docs/bitcoin/etl/address-stats" hreflang="en"><link data-rh="true" rel="alternate" href="https://eba.b1aab.ai/docs/bitcoin/etl/address-stats" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://MZ8MD5Z0KJ-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Bitcoin","item":"https://eba.b1aab.ai/docs/bitcoin/overview"},{"@type":"ListItem","position":2,"name":"ETL Pipeline","item":"https://eba.b1aab.ai/docs/bitcoin/etl/overview"},{"@type":"ListItem","position":3,"name":"Address Statistics","item":"https://eba.b1aab.ai/docs/bitcoin/etl/address-stats"}]}</script><link rel="alternate" type="application/rss+xml" href="/releases/rss.xml" title="EBA RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/releases/atom.xml" title="EBA Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XTYNS2LLF7"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-XTYNS2LLF7",{anonymize_ip:!0})</script>



<link rel="search" type="application/opensearchdescription+xml" title="EBA" href="/opensearch.xml">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.3b7c4e39.css">
<script src="/assets/js/runtime~main.00c21248.js" defer="defer"></script>
<script src="/assets/js/main.65dc02c8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","dark"),document.documentElement.setAttribute("data-theme-choice","dark"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">EBA</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/gs/welcome">Documentation</a><a class="navbar__item navbar__link" href="/releases">Releases</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/B1AAB/GraphStudio" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Graph Studio<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/B1AAB/EBA" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/gs/welcome"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/bitcoin/overview"><span title="Bitcoin" class="categoryLinkLabel_W154">Bitcoin</span></a><button aria-label="Collapse sidebar category &#x27;Bitcoin&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/bitcoin/etl/overview"><span title="ETL Pipeline" class="categoryLinkLabel_W154">ETL Pipeline</span></a><button aria-label="Collapse sidebar category &#x27;ETL Pipeline&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bitcoin/etl/node-sync"><span title="Sync a Bitcoin Node" class="linkLabel_WmDU">Sync a Bitcoin Node</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bitcoin/etl/traverse"><span title="Extract Block Data" class="linkLabel_WmDU">Extract Block Data</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/bitcoin/etl/address-stats"><span title="Address Statistics" class="linkLabel_WmDU">Address Statistics</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bitcoin/etl/txo-lifecycle"><span title="TXO Lifecycle" class="linkLabel_WmDU">TXO Lifecycle</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bitcoin/etl/import"><span title="Import into neo4j" class="linkLabel_WmDU">Import into neo4j</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bitcoin/etl/restore"><span title="Restore database dump" class="linkLabel_WmDU">Restore database dump</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/bitcoin/sampling/overview"><span title="Sampling" class="categoryLinkLabel_W154">Sampling</span></a><button aria-label="Expand sidebar category &#x27;Sampling&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/bitcoin/datasets/overview"><span title="Datasets" class="categoryLinkLabel_W154">Datasets</span></a><button aria-label="Expand sidebar category &#x27;Datasets&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/contribute/overview"><span title="Contributing" class="categoryLinkLabel_W154">Contributing</span></a><button aria-label="Expand sidebar category &#x27;Contributing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq/"><span title="FAQ" class="linkLabel_WmDU">FAQ</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/publications"><span title="Publications" class="linkLabel_WmDU">Publications</span></a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/bitcoin/overview"><span>Bitcoin</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/bitcoin/etl/overview"><span>ETL Pipeline</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Address Statistics</span></li></ul></nav><div class="theme-doc-markdown markdown"><header><h1>Address Statistics</h1></header><div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>This is an optional step,
and it details a process that requires address tracking to have been enabled during <code>eba bitcoin traverse</code>.</p><p>You may skip this step if you do not intent to get per-block statistics.</p></div></div>
<p>The goal is to calculate various block-level address statistics,
such as identifying new vs. previously seen addresses,
and counting unique and total addresses per block.</p>
<p>Generating these statistics requires efficient uniqueness checking
across vast amounts of data.
While in-memory checks are effective for small data,
they don&#x27;t scale to a large list of Bitcoin addresses.
We also found that using a database (e.g., PostgreSQL)
to track address uniqueness during the traversal process
introduced significant overhead.</p>
<p>Therefore, we utilize a two-step post-processing approach:</p>
<ul>
<li class="">
<p>Step 1: Address Logging During Traversal:
During the <code>traverse</code> command, all addresses are simply
appended to plain text files.
No costly indexing or uniqueness checks are performed at this stage.</p>
</li>
<li class="">
<p>Step 2: Disk-based Post-Traversal Uniqueness Check:
First, the large addresses text file from step 1 are sorted using a disk-based sorting method.
Then, a custom tool processes the sorted list and the calculation of all necessary statistics.</p>
</li>
</ul>
<p>The specific steps are outlined below .</p>
<ol>
<li class="">
<p>Merge all the files (you may skip this if you have only one file):</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> *_addresses.tsv </span><span class="token operator">&gt;</span><span class="token plain"> combined_addresses.tsv</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>Sorted the merged file:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable environment constant" style="color:rgb(189, 147, 249);font-style:italic">LC_ALL</span><span class="token operator">=</span><span class="token plain">C </span><span class="token function" style="color:rgb(80, 250, 123)">sort</span><span class="token plain"> --buffer-size</span><span class="token operator">=</span><span class="token plain">32G </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--parallel</span><span class="token operator">=</span><span class="token number">16</span><span class="token plain"> --temporary-directory</span><span class="token operator">=</span><span class="token plain">. -t</span><span class="token string" style="color:rgb(255, 121, 198)">$&#x27;</span><span class="token string entity" style="color:rgb(255, 121, 198)">\t</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;</span><span class="token plain"> -k1,1 combined_addresses.tsv </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-o</span><span class="token plain"> sorted_combined_addresses.tsv</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">real    1166m35.442s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user    62m13.415s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sys     33m40.558s</span><br></span></code></pre></div></div>
<p>This uses 32G RAM and uses disk for temporarily storing files needed for sorting large files.
You may adjust the RAM size and make sure enough storage space on the specified paths.</p>
</li>
<li class="">
<p>Run the <code>EXP_AddAddressStatsToBlockStats</code> project. (Experimental)</p>
</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/B1AAB/EBA/edit/main/website/docs/bitcoin/etl/s3-address-stats.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/bitcoin/etl/traverse"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Extract Block Data</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/bitcoin/etl/txo-lifecycle"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">TXO Lifecycle</div></a></nav></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 B1AAB EBA</div></div></div></footer></div>
</body>
</html>